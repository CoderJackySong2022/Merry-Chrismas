<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AE-圣诞树</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
        }

        #main {
            position: fixed;
            top: 0;
            left: 0;
        }

        #video1 {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body id="app">
    <div id="main">
        <!-- 视频播放 -->
        <video id="video1" muted autoplay loop src="./video/chrismas.mp4"></video>
        
        <!-- 音乐播放 -->
        <audio id="music1" autoplay loop preload="auto">
            <source src="./music/jinniandongtianpeizhewoba.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </div>

    <script>
        // 获取音频和视频元素
        const video = document.getElementById("video1");
        const music = document.getElementById("music1");

        // 设置视频播放速度
        video.playbackRate = 0.8;

        // 修复自动播放限制
        function enableAudio() {
            if (music.paused) {
                music.play().catch(error => {
                    console.error("Audio autoplay failed due to browser restrictions:", error);
                });
            }
        }

        // 用户交互触发音频播放
        document.addEventListener("click", enableAudio);
        document.addEventListener("mousemove", enableAudio);

        // 检查音频加载状态
        music.addEventListener("error", () => {
            console.error("Failed to load audio file. Check the file path or format.");
        });

        // 模拟用户交互以触发音频播放
        setTimeout(() => {
            if (music.paused) {
                const event = new MouseEvent("click");
                document.dispatchEvent(event);
            }
        }, 1000);
    </script>
</body>
</html>
